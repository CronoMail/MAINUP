(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{3454:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(7663)},7270:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upload",function(){return r(3195)}])},3195:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return UploadPage}});var n=r(5893),o=r(7294),a=r(1163),l=r(3454);function UploadForm(){(0,a.useRouter)();let[e,t]=(0,o.useState)(!1),[r,i]=(0,o.useState)(""),[u,s]=(0,o.useState)({title:"",category:"illustration",subcategory:"",twitterHandle:"",twitterId:"",twitterUrl:"",description:"",mcol:"",twitterLink:""}),[c,d]=(0,o.useState)(null),[p,f]=(0,o.useState)(!1),[m,h]=(0,o.useState)("");if(!e)return(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r===l.env.NEXT_PUBLIC_UPLOAD_PASSWORD?t(!0):h("Invalid password")},className:"max-w-md mx-auto p-4 bg-white rounded-lg shadow",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("input",{type:"password",placeholder:"Enter password",value:r,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded",required:!0}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-[#1DA1F2] text-white p-2 rounded hover:bg-[#1a91da]",children:"Unlock Upload Form"})]}),m&&(0,n.jsx)("div",{className:"text-red-500 mt-2",children:m})]});let handleSubmit=async e=>{if(e.preventDefault(),!c){h("Please select a file");return}f(!0),h("Uploading...");try{let e=new FormData;e.append("file",c),e.append("password",r),Object.entries(u).forEach(t=>{let[r,n]=t;n&&e.append(r,n)});let t=await fetch("/api/upload",{method:"POST",body:e}),n=await t.json();console.log("Upload response:",n),t.ok?(h("Upload successful!"),d(null),s({title:"",category:"illustration",subcategory:"",twitterHandle:"",twitterId:"",mcol:"",twitterUrl:"",description:"",twitterLink:""})):h("Upload failed: ".concat(n.message))}catch(e){h("Upload failed: "+e.message)}finally{f(!1)}};return(0,n.jsx)("form",{onSubmit:handleSubmit,className:"max-w-2xl mx-auto p-4 bg-white rounded-lg shadow",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return d((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full p-2 border rounded",required:!0}),(0,n.jsx)("input",{type:"text",placeholder:"Title",value:u.title,onChange:e=>s({...u,title:e.target.value}),className:"w-full p-2 border rounded",required:!0}),(0,n.jsxs)("select",{value:u.category,onChange:e=>s({...u,category:e.target.value}),className:"w-full p-2 border rounded",required:!0,children:[(0,n.jsx)("option",{value:"landscape",children:"Illustration"}),(0,n.jsx)("option",{value:"fanart",children:"FanArt"}),(0,n.jsx)("option",{value:"occhara",children:"OC"}),(0,n.jsx)("option",{value:"comm",children:"Commission"}),(0,n.jsx)("option",{value:"male",children:"Male"}),(0,n.jsx)("option",{value:"vtube",children:"Vtubers"})]}),(0,n.jsx)("input",{type:"text",placeholder:"Subcategory (e.g., FanArt 2024)",value:u.subcategory,onChange:e=>s({...u,subcategory:e.target.value}),className:"w-full p-2 border rounded"}),(0,n.jsx)("input",{type:"url",placeholder:"Twitter Link",value:u.twitterLink,onChange:e=>s({...u,twitterLink:e.target.value}),className:"w-full p-2 border rounded"}),(0,n.jsx)("textarea",{placeholder:"Description",value:u.description,onChange:e=>s({...u,description:e.target.value}),className:"w-full p-2 border rounded",rows:4}),(0,n.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-[#1DA1F2] text-white p-2 rounded hover:bg-[#1a91da] disabled:opacity-50",children:p?"Uploading...":"Upload Work"}),m&&(0,n.jsx)("p",{className:"text-center mt-4",children:m})]})})}function UploadPage(){return(0,n.jsx)("div",{className:"min-h-screen bg-gray-100 py-12",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Upload New Work"}),(0,n.jsx)(UploadForm,{})]})})}},7663:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var a=[],l=!1,i=-1;function cleanUpNextTick(){l&&n&&(l=!1,n.length?a=n.concat(a):i=-1,a.length&&drainQueue())}function drainQueue(){if(!l){var e=runTimeout(cleanUpNextTick);l=!0;for(var t=a.length;t;){for(n=a,a=[];++i<t;)n&&n[i].run();i=-1,t=a.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}},a=!0;try{t[e](o,o.exports,__nccwpck_require__),a=!1}finally{a&&delete r[e]}return o.exports}__nccwpck_require__.ab="//";var n=__nccwpck_require__(229);e.exports=n}()},1163:function(e,t,r){e.exports=r(9974)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7270)}),_N_E=e.O()}]);